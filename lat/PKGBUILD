pkgname=lat
pkgver=1.5.0
pkgrel=2
pkgdate=20240430
pkgdesc="Loongson Architecture Translator"
arch=('loong64')
url="http://loongnix.cn"
license=('custom')
depends=('procps-ng' 'lat-runtime-i386' 'lat-runtime-x86_64')
provides=(qemu-user-binfmt-provider)
conflicts=(qemu-user-binfmt-provider)
OPTIONS=(strip)
source=(lat-${pkgver}-${pkgdate}.tar.xz)
sha256sums=('27f1202b69bdc479ca7b3b1e0d2f1cdf8e78a8594beef85f8af00ae4c5ba4b65')

package() {
  cd $pkgname-$pkgver

  cp -r * ${pkgdir}

  echo "vm.mmap_min_addr = 65536" > mmap_min_addr.conf
  install -Dm644 mmap_min_addr.conf ${pkgdir}/usr/lib/sysctl.d/mmap_min_addr.conf
}
